Controllers / UsersController.cs.
using Microsoft.AspNetCore.Mvc;
using Microsoft.EntityFrameworkCore;

namespace ApiService.Controllers
{
    [Route("api/[controller]")]
    [ApiController]
    public class UsersController : ControllerBase
    {
        private readonly AppDbContext _context;

        public UsersController(AppDbContext context)
        {
            _context = context;
        }

        // üëá –°—é–¥–∏ –º–∏ –¥–æ–¥–∞–º–æ –º–µ—Ç–æ–¥ DeleteUser
    }
}

DeleteUser
[HttpDelete("{id}")]
public async Task<IActionResult> DeleteUser(int id, [FromQuery] string userCode)
{
    // 1 –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —á–∏ —î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —ñ–∑ –∑–∞–¥–∞–Ω–∏–º userCode
    var adminUser = await _context.Users.FirstOrDefaultAsync(u => u.UserCode == userCode);
    if (adminUser == null)
        return NotFound("User with provided userCode not found.");

    // 2 –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á ‚Äî –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä
    if (!adminUser.IsAdmin)
        return Forbid("Only admin can remove participants.");

    // 3 –ü–æ—à—É–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, —è–∫–æ–≥–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–¥–∞–ª–∏—Ç–∏
    var userToDelete = await _context.Users.FirstOrDefaultAsync(u => u.Id == id);
    if (userToDelete == null)
        return NotFound("User with provided id not found.");

    // 4 –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —â–æ –≤–æ–Ω–∏ –∑ –æ–¥–Ω—ñ—î—ó –∫—ñ–º–Ω–∞—Ç–∏
    if (userToDelete.RoomId != adminUser.RoomId)
        return BadRequest("Users belong to different rooms.");

    // 5 –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä –Ω–µ –º–æ–∂–µ –≤–∏–¥–∞–ª–∏—Ç–∏ —Å–µ–±–µ
    if (userToDelete.Id == adminUser.Id)
        return BadRequest("Admin cannot remove themselves.");

    // 6 –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —á–∏ –∫—ñ–º–Ω–∞—Ç–∞ –≤—ñ–¥–∫—Ä–∏—Ç–∞
    var room = await _context.Rooms.FirstOrDefaultAsync(r => r.Id == adminUser.RoomId);
    if (room == null || room.IsClosed)
        return BadRequest("Room is already closed.");

    // 7 –í–∏–¥–∞–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
    _context.Users.Remove(userToDelete);
    await _context.SaveChangesAsync();

    // 8 –í—ñ–¥–ø–æ–≤—ñ–¥—å —É—Å–ø—ñ—Ö—É
    return Ok($"User {userToDelete.FirstName} {userToDelete.LastName} removed successfully.");
}
